# 2.2 문서 구조
문서는 문자, 선, 다각형 등 기본적인 그래픽 요소를 단순히 배열한 것입니다. 이런 요소들을 통해서 문서의 전체 내용을 정의할 수 있게 됩니다. 그러나 설계자는 종종 이런 요소를 그래픽 요소로 보지 않고 각각 행, 열, 그림, 표, 아니면 다른 형태의 하위 구조 등의 물리적 구조로 봅니다(한편, 문서의 지은이는 문서를 논리적인 구조로 바라봅니다. 이를테면, 문장, 단락, 절, 소절, 장 단위로 말이죠. 이러한 예를 간단하게 하기 위해, 본 설계에서는 이러한 논리적 구조에 대한 정보를 내부 표현부에 명시적으로 저장하지는 않을 것입니다. 하지만 여기서 보이는 설계 방법은 논리적 구조 정보 등을 표현하는 데에도 마찬가지로 잘 적용할 수 있습니다). 또한 이 하위 구조는 또 다른 하위 구조를 포함할 수 있습니다.

Lexi의 사용자 인터페이스는 사용자가 이들 하위 구조를 직접 다룰 수 있어야 합니다. 예를 들어, 사용자는 다이어그램을 하나의 단위로 다루어야 하며, 이 다이어그램을 개별적 그래픽 요소들이 모인 집합체로 생각해서는 안 됩니다.

또한 테이블을 하나로 조작할 수 있어야지, 테이블을 텍스트와 그래픽 요소들이 대량으로 모인 것으로 보면 안 됩니다. 이렇게 해야 인터페이스를 직관적이고 간단하게 만들 수 있습니다. Lexi의 구현에 비슷한 품질을 부여하려면 문서의 물리적 구조에 부합하는 내부 표현을 선택합니다.

우선적으로, 본 편집기의 내부 표현은 다음 열거한 항목을 지원해야 합니다.

- 문서의 물리적 구조 유지 기능: 이 물리적 구조란 문자와 그래픽, 행, 열, 테이블, 기타 것들의 정렬을 의미합니다.
- 문서를 시각적으로 생성하고 표현하는 부분
- 내부 표현 영역의 요소들과 화면에 표시된 요소들을 사상(寫像:어떤 집합의 임의의 원소가 다른 집합의 하나의 원소에 대응하는 일)하는 부분
  - 이것이 있어야 사용자가 시각적 표현에 있는 무엇인가를 선택할 때 사용자가 어떤 요소를 가리킨 것인지를 Lexi가 결정할 수 있습니다.

이들 목표를 축으로 해서, 부가적으로 제약 사항 몇 개가 추가됩니다. 첫째, 문자와 그래픽을 동일하게 다뤄야 합니다. 본 편집기의 인터페이스는 사용자가 그림 안에서 문자를 넣거나 문자 안에서 그림을 넣을 수 있게 합니다. 그러므로 그림을 텍스트의 특별한 경우로 처리하거나 텍스트를 그림의 특별한 경우로 처리해서는 안 됩니다. 서로를 서로의 특별한 경우로 처리한다면, 텍스트와 그림을 모두 처리하는 데에 작업이 중복됩니다. 따라서 서식을 맞추거나 조작 기법을 한 번만 정의해서 문자와 그래픽 모두를 처리할 수 있어야 합니다.

둘째, 단일 요소와 그룹 요소를 구분해서 구현하면 안 됩니다. Lexi는 단일 요소와 복합 요소를 동일하게 다룰 수 있어야만 임의의 복잡한 문서를 다룰 수 있습니다. 예를 들어, 2열 5번째 행 10번째 요소가 하나의 문자일 수도 있고, 수많은 하위 요소를 갖는 복잡한 다이어그램일 수도 있습니다. 이 요소는 스스로 자신을 그리고 차원을 표시할 수 있는 대상이지, 그것이 복잡하다고 해서 페이지의 어디에 나타낼까, 어떻게 보이게 할까에 대한 추가 부담을 가질 필요는 없습니다.

허나, 철자법 검사와 붙임표 연결 지점 같은 처리를 하기 위한 텍스트 분석은 필요합니다. 두 번째 제약 사항에 반대되는 입장이지요. 선이 단순 객체인지 복합 객체인지에 대한 고려는 하지 않으려고 합니다. 그러나 가끔은 분석 대상에 따라서 분석 방법이 달라져야 합니다. 즉, 다각형의 

